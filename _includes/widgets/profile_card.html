<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profile Page</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Font Awesome 5（如全站已有，可移除） -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    /* ===== UHM 主题色 ===== */
    :root{
      --uhm-green:#024731;
      --uhm-green-darker:#013D2A;
    }

    /* 大屏右侧浮动容器 */
    .float-container{
      float:right; max-width:250px; width:auto;
      margin-left:1em; text-align:center;
    }

    /* 头像：方形 + 主题色边框 + 轻微投影，像贴图 */
    .portrait-img{
      height:180px; width:180px; object-fit:cover;
      border: 2px solid var(--uhm-green);
      box-shadow: 0 2px 8px rgba(0,0,0,.08);
    }

    /* 图标行：不换行、居中、无滑动；间距更紧凑 */
    .icon-row{
      display:flex; flex-wrap:nowrap; justify-content:center;
      gap:8px;               /* 统一更小的间距 */
      margin-bottom:12px;
      white-space:nowrap;    /* 不允许换行 */
      overflow-x:hidden;     /* 禁止横向滑动 */
    }
    /* 图标按钮：更紧凑的尺寸 */
    .icon-btn{
      flex:0 0 auto; width:36px; height:36px;
      display:inline-flex; align-items:center; justify-content:center;
      text-decoration:none !important; outline:none; border-radius:9999px;
      margin:0 4px;          /* 兜底：旧浏览器无 gap 也有间距 */
    }
    .icon-btn i{
      font-size:22px; color:var(--uhm-green);
      transition: transform .18s ease, filter .18s ease, color .18s ease;
      line-height:1;
    }
    .icon-btn:hover i, .icon-btn:focus i{
      transform: translateY(-2px) scale(1.12);
      filter: brightness(1.05);
      color: var(--uhm-green-darker);
    }
    .icon-btn:active i{ transform: translateY(-1px) scale(1.06); }
    .icon-btn:focus{ box-shadow:0 0 0 3px rgba(2,71,49,.15); }

    /* 分割线（头像下方） */
    .profile-divider{
      border:0; height:1px; width:100%;
      background: linear-gradient(to right, rgba(2,71,49,.15), rgba(2,71,49,.35), rgba(2,71,49,.15));
      margin: 8px 0 10px;
    }

    /* 下方按钮（CV / Deadline） */
    .action-buttons{
      display:flex; justify-content:center; gap:10px;
    }
    .btn-uhm{
      background-color: var(--uhm-green);
      border-color: var(--uhm-green);
      color:#fff !important;
      padding:.4rem .85rem;
      border-radius:.5rem;
      font-weight:600;
      transition: transform .15s ease, background-color .15s ease, border-color .15s ease;
    }
    .btn-uhm:hover, .btn-uhm:focus{
      background-color: var(--uhm-green-darker);
      border-color: var(--uhm-green-darker);
      transform: translateY(-1px);
      text-decoration:none; outline:none;
    }

    /* 小屏适配：取消浮动、两侧留白 */
    @media (max-width: 767.98px){
      .card-body{ padding-left:30px !important; padding-right:30px !important; }
      .float-container{
        float:none !important; display:block; width:auto;
        margin:0 auto 20px; text-align:center;
      }
    }

    /* 链接主题色（其余不变） */
    a{ color:var(--uhm-green); }
    a:hover, a:focus{ color:var(--uhm-green-darker); text-decoration:none; }
    hr{ border-top:1px solid rgba(2,71,49,.2); }
  </style>
</head>
<body>
<div class="row">
  <div class="col">
    <div class="card border-0 shadow-sm bg-white mt-5">
      <div class="card-body p-5">

        <!-- 右侧浮动：头像 + 图标 + 分割线 + 按钮 -->
        <div class="float-container">
          {% if site.data.profile.portrait_url %}
          <a target="_blank" href="{{ site.data.profile.portrait_url | relative_url }}" rel="noopener" aria-label="Open portrait">
            <img src="{{ site.data.profile.portrait_url | relative_url }}"
                 class="img-fluid portrait-img"
                 alt="{{ site.data.profile.portrait_alt | default: 'Portrait' }}"
                 loading="lazy" decoding="async">
          </a>
          {% endif %}

          <!-- 图标（紧凑、单行、无滑动；已移除 CV 图标） -->
          <div class="mt-3">
            <div class="icon-row">

              <a class="icon-btn" href="mailto:{{ site.data.profile.email | encode_email }}" aria-label="Email">
                <i class="fas fa-envelope"></i>
              </a>

              {% if site.data.profile.gscholar %}
                {%- if site.data.profile.gscholar contains 'scholar.google' -%}
                  {%- assign gscholar_url = site.data.profile.gscholar -%}
                {%- else -%}
                  {%- assign gscholar_url = 'https://scholar.google.com/citations?user=' | append: site.data.profile.gscholar -%}
                {%- endif -%}
              <a class="icon-btn" target="_blank" rel="noopener" href="{{ gscholar_url }}" aria-label="Google Scholar">
                <i class="fas fa-graduation-cap"></i>
              </a>
              {% endif %}

              {% if site.data.profile.github %}
              <a class="icon-btn" target="_blank" rel="noopener" href="https://github.com/{{ site.data.profile.github }}" aria-label="GitHub">
                <i class="fab fa-github"></i>
              </a>
              {% endif %}

              {% if site.data.profile.wechat_qrcode %}
              <a class="icon-btn" data-toggle="modal" data-target="#modal-wechat" href="javascript:void(0)" aria-label="WeChat">
                <i class="fab fa-weixin"></i>
              </a>
              {% endif %}

              {% if site.data.profile.twitter %}
              <a class="icon-btn" target="_blank" rel="noopener" href="https://twitter.com/{{ site.data.profile.twitter }}" aria-label="Twitter">
                <i class="fab fa-twitter"></i>
              </a>
              {% endif %}

              {% if site.data.profile.linkedin %}
              <a class="icon-btn" target="_blank" rel="me noopener" href="https://www.linkedin.com/in/{{ site.data.profile.linkedin }}" aria-label="LinkedIn">
                <i class="fab fa-linkedin"></i>
              </a>
              {% endif %}

              {% if site.data.profile.orcid %}
              <a class="icon-btn" target="_blank" rel="me noopener" href="https://orcid.org/{{ site.data.profile.orcid }}" aria-label="ORCID">
                <i class="fab fa-orcid"></i>
              </a>
              {% endif %}

            </div>
          </div>

          <!-- 分割线 -->
          <hr class="profile-divider">

          <!-- 下方按钮（CV / Deadline） -->
          <div class="action-buttons">
            {% if site.data.profile.cv_link %}
              <a class="btn btn-uhm" target="_blank" rel="noopener" href="{{ site.data.profile.cv_link | relative_url }}">CV</a>
            {% endif %}

            {% if site.data.profile.deadline_link %}
              <a class="btn btn-uhm" target="_blank" rel="noopener" href="{{ site.data.profile.deadline_link }}">Deadline</a>
            {% elsif site.data.profile.deadline %}
              <a class="btn btn-uhm" target="_blank" rel="noopener" href="{{ site.data.profile.deadline | relative_url }}">Deadline</a>
            {% endif %}
          </div>
        </div>

        <!-- 左侧文字内容 -->
        <div>
          <div class="text-profile-position">
            {% for position in site.data.profile.positions %}
              {% if position.logo %}
                <img src="{{ position.logo | relative_url }}" alt="{{ position.logo_alt | default: 'Logo' }}" class="inline-badge"/>
              {% endif %}
              {{ position.name }}<br/>
            {% endfor %}
          </div>
          <div class="text-profile-bio mt-3" {% if site.data.profile.short_bio_text_justify %}style="text-align: justify;"{% endif %}>
            {{ site.data.profile.short_bio }}
          </div>
        </div>

        <div style="clear:both;"></div>
      </div>
    </div>
  </div>
</div>

{% if site.data.profile.wechat_qrcode %}
<div class="modal fade" id="modal-wechat" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body p-0">
        <img src="{{ site.data.profile.wechat_qrcode | relative_url }}" class="img-fluid" alt="WeChat QR">
      </div>
      {% if site.data.profile.wechat_prompt %}
      <div class="modal-body p-1">
        {{ site.data.profile.wechat_prompt }}
      </div>
      {% endif %}
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Close</button>
      </div>
    </div>
  </div>
</div>
{% endif %}

<!-- Bootstrap JS 依赖 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js" defer></script>
</body>
</html>
